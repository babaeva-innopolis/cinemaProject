{"version":3,"sources":["../js/single.js"],"names":["info","URLSearchParams","location","search","filmid","get","getFilmData","getFilmDetails","then","d","json","filmData","header","document","getElementById","description","poster","textContent","nameRu","src","posterUrl","console","log","STAR_SELECTED_CLASS","likes","getFilmMetaInfo","fetch","filmInfo","body","views","ratingNuber","ratings","reduce","a","b","length","rating","String","Math","round","padEnd","scoreLayout","stars","querySelector","i","star","classList","add","likeIcon","addEventListener","method"],"mappings":"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","sourcesContent":["const info = new URLSearchParams(location.search);\r\n\r\nconst filmid = info.get('id');\r\n\r\n const getFilmData = async () => {\r\n     const filmData = await getFilmDetails(filmid).then(d => d.json());\r\n     const header = document.getElementById('sf-header');\r\n     const description = document.getElementById('sf-desc');\r\n     const poster = document.getElementById('sf-poster');\r\n\r\n     header.textContent = filmData.nameRu;\r\n     description.textContent = filmData.description;\r\n     poster.src = filmData.posterUrl;\r\n\r\n     console.log(filmData);\r\n\r\n }\r\n const STAR_SELECTED_CLASS = '.sf-rating-star-selected';\r\n const likes = document.getElementById('sf-like');\r\n\r\n\r\n const getFilmMetaInfo = async () => {\r\n     const {body: filmInfo} = await fetch(`http://inno-ijl.ru/multystub/stc-21/film/${filmid}`).then(d => d.json());\r\n     const views = document.getElementById('sf-views');\r\n     \r\n     views.textContent = `${filmInfo.views} Views`;\r\n     likes.textContent = `${filmInfo.likes} Likes`;\r\n     const ratingNuber = filmInfo.ratings.reduce((a, b) => a+b, 0) / filmInfo.ratings.length\r\n     const rating = String(Math.round(ratingNuber * 10) / 10).padEnd(3, '.0');\r\n     const scoreLayout = document.getElementById('sf-rating-score');\r\n     scoreLayout.textContent = rating;\r\n\r\n     const stars = document.querySelector('sf-rating-star');\r\n     for (let i = 0; i < stars.length; i++) {\r\n        if(i >= ratingNuber - 1) break;\r\n\r\n        const star = stars[i];\r\n         star.classList.add(STAR_SELECTED_CLASS);\r\n         \r\n     }\r\n\r\n     \r\n\r\n    console.log(filmInfo.body);\r\n\r\n }\r\n\r\n\r\n \r\nconst likeIcon = document.querySelector('#sf-like-icon');\r\n\r\nlikeIcon.addEventListener('click', () => {\r\n fetch(`http://inno-ijl.ru/multystub/stc-21/film/${filmid}/like`, {\r\n     method: 'POST',\r\n });\r\n likeIcon.classList.add('like-icon-liked');\r\n likes.textContent = `${filmInfo.likes} Likes`;\r\n});\r\n\r\ngetFilmData();\r\ngetFilmMetaInfo();\r\n"],"file":"single.js"}