{"version":3,"sources":["../js/popup.js"],"names":["prizeForm","document","getElementById","openBtn","querySelector","closeBtn","nameInputWrapper","parentNode","emailInputWrapper","INPUT_ERROR_CLASS","INPUT_FOCUS_CLASS","popupToggle","classList","toggle","initializeField","field","input","getElementsByTagName","errorText","clearError","remove","value","innerText","addEventListener","add","focus","getValue","setError","error","nameField","emailField","onclick","event","preventDefault","nameValue","emailValue","prizeSelect","checkbox","test","data","name","email","prize","url","URL","search","URLSearchParams","toString","fetch","then"],"mappings":"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","sourcesContent":["const prizeForm = document.getElementById('prize-popup');\r\nconst openBtn = document.querySelector('#popupOpen');\r\nconst closeBtn = document.querySelector('#popupExit');\r\nconst nameInputWrapper = document.querySelector('#prize-popup input[name=\"name\"]').parentNode;\r\nconst emailInputWrapper = document.querySelector('#prize-popup input[name=\"email\"]').parentNode;\r\n\r\n\r\n\r\n\r\n\r\nconst INPUT_ERROR_CLASS = 'popup__label-empty';\r\nconst INPUT_FOCUS_CLASS = 'popup__label-filled';\r\n\r\n\r\nfunction popupToggle(){\r\n    prizeForm.classList.toggle('hidden');\r\n    \r\n};\r\n\r\nfunction initializeField(field){\r\n    const input = field.getElementsByTagName('input')[0];\r\n    const errorText = field.querySelector('.st-input1__error-msg');\r\n    clearError();\r\n    field.classList.remove(INPUT_FOCUS_CLASS);\r\n    input.value = '';\r\n\r\n    function clearError() {\r\n        field.classList.remove(INPUT_ERROR_CLASS);\r\n        errorText.innerText = '';\r\n    }\r\n\r\n    input.addEventListener('focus', function(){\r\n        field.classList.add(INPUT_FOCUS_CLASS);\r\n    });\r\n    input.addEventListener('input', clearError);\r\n\r\n    input.addEventListener('blur', function(){\r\n        if (!input.value){\r\n            field.classList.remove(INPUT_FOCUS_CLASS);\r\n        }\r\n\r\n    });\r\n\r\n    \r\n    \r\n\r\n    return {\r\n        focus(){\r\n        input.focus()\r\n        },\r\n         getValue(){\r\n        return input.value\r\n        },\r\n        setError(error){\r\n            errorText.innerText = error;\r\n            field.classList.add(INPUT_ERROR_CLASS);\r\n        \r\n\r\n        }\r\n    }\r\n\r\n};\r\nconst nameField =  initializeField(nameInputWrapper);\r\nconst emailField =  initializeField(emailInputWrapper);\r\n\r\nopenBtn.onclick = function (){\r\n\r\n    popupToggle();\r\n    nameField.focus();\r\n};\r\n\r\ncloseBtn.onclick = popupToggle;\r\n\r\nprizeForm.addEventListener('submit', function(event){\r\n\r\n    event.preventDefault();\r\n\r\n    const nameValue = nameField.getValue();\r\n    const emailValue = emailField.getValue();\r\n\r\n    const prizeSelect = document.querySelector('#prize');\r\n    const checkbox = document.getElementById(\"checkbox-prize\");\r\n     \r\n\r\n    if (!nameValue) {\r\n        nameField.setError('Поле обязательно для заполнения');\r\n        nameField.focus();\r\n        return;\r\n    }\r\n    if (!emailValue) {\r\n        emailField.setError('Поле обязательно для заполнения');\r\n        emailField.focus();\r\n        return;\r\n\r\n    \r\n    }\r\n    if (!/^[\\w]{3,16}@[a-z0-9]{4,10}\\.[a-z]{2,3}$/.test(emailValue)) {\r\n        emailField.setError('не валидный email');\r\n        emailField.focus();\r\n        return;\r\n\r\n    \r\n    }\r\n    if (prizeSelect.value === 'none') {\r\n        prizeSelect.classList.add(INPUT_ERROR_CLASS);\r\n        return\r\n    }\r\n    \r\n    \r\n    const data = {\r\n        name: nameValue,\r\n        email: emailValue,\r\n        prize: prizeSelect.value,\r\n    }\r\n    const url = new URL ('http://inno-ijl.ru/multystub/stc-21-03/feedback');\r\n    url.search = new URLSearchParams(data).toString();\r\n    //  if (checkbox.checked) {\r\n    //         fetch(url.toString());\r\n    // }\r\n    fetch(url.toString())\r\n    .then(() => {\r\n        popupToggle();\r\n    });\r\n    \r\n});\r\n\r\n        \r\n    \r\n   \r\n\r\n    \r\n\r\n"],"file":"popup.js"}