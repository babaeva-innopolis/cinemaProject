{"version":3,"sources":["../js/block-films.js"],"names":["API_TOKEN","blockFilmsWrapper","document","getElementById","innerHTML","getKinopoiskApiData","url","fetch","headers","accept","getTopFilms","getFilmDetails","id","getBlockFilmsData","answer","json","data","films","forEach","film","filmDescId","filmId","posterUrlPreview","nameRu","filmData","descElement","innerText","description","removeChild","parentNode"],"mappings":";;;;;;AAAA,IAAMA,SAAS,GAAG,sCAAlB;AAEA,IAAMC,iBAAiB,GAAGC,QAAQ,CAACC,cAAT,CAAwB,qBAAxB,CAA1B;AAEAF,iBAAiB,CAACG,SAAlB,GAA8B,EAA9B;;AAEA,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,GAAD,EAAS;AACjC,SAAOC,KAAK,CAACD,GAAD,EAAM;AACdE,IAAAA,OAAO,EAAE;AACLC,MAAAA,MAAM,EAAE,kBADH;AAEL,mBAAa;AAFR;AADK,GAAN,CAAZ;AAMH,CAPD;;AASA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AACtB,SAAOL,mBAAmB,CAAC,oFAAD,CAA1B;AACH,CAFD;;AAIA,IAAMM,cAAc,GAAG,SAAjBA,cAAiB,CAACC,EAAD,EAAQ;AAC3B,SAAOP,mBAAmB,8DAAuDO,EAAvD,EAA1B;AACH,CAFD;;AAIA,IAAMC,iBAAiB;AAAA,qEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACDH,WAAW,EADV;;AAAA;AAChBI,YAAAA,MADgB;AAAA;AAAA,mBAEHA,MAAM,CAACC,IAAP,EAFG;;AAAA;AAEhBC,YAAAA,IAFgB;AAItBA,YAAAA,IAAI,CAACC,KAAL,CAAWC,OAAX;AAAA,kFAAmB,iBAAMC,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACTC,wBAAAA,UADS,6BACuBD,IAAI,CAACE,MAD5B;AAEfpB,wBAAAA,iBAAiB,CAACG,SAAlB,iIAGqBe,IAAI,CAACG,gBAH1B,mMAO0CH,IAAI,CAACI,MAP/C,4EAQ8CH,UAR9C;AAFe;AAAA,+BAeMT,cAAc,CAACQ,IAAI,CAACE,MAAN,CAfpB;;AAAA;AAeTP,wBAAAA,MAfS;AAAA;AAAA,+BAgBQA,MAAM,CAACC,IAAP,EAhBR;;AAAA;AAgBTS,wBAAAA,QAhBS;AAkBTC,wBAAAA,WAlBS,GAkBKvB,QAAQ,CAACC,cAAT,CAAwBiB,UAAxB,CAlBL;AAmBfK,wBAAAA,WAAW,CAACC,SAAZ,GAAwBF,QAAQ,CAACG,WAAjC;;AACA,4BAAI,CAACH,QAAQ,CAACG,WAAd,EAA2B;AACvB1B,0BAAAA,iBAAiB,CAAC2B,WAAlB,CAA8BH,WAAW,CAACI,UAAZ,CAAuBA,UAArD;AAEH;;AAvBc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAnB;;AAAA;AAAA;AAAA;AAAA;;AAJsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAjBhB,iBAAiB;AAAA;AAAA;AAAA,GAAvB;;AA+BAA,iBAAiB","sourcesContent":["const API_TOKEN = '5499449d-65c4-452f-b6e6-0f0ab98493a5';\r\n\r\nconst blockFilmsWrapper = document.getElementById('block-films-wrapper');\r\n\r\nblockFilmsWrapper.innerHTML = '';\r\n\r\nconst getKinopoiskApiData = (url) => {\r\n    return fetch(url, {\r\n        headers: {\r\n            accept: 'application/json', \r\n            'X-API-KEY': '5499449d-65c4-452f-b6e6-0f0ab98493a5'\r\n        }\r\n    });\r\n}\r\n\r\nconst getTopFilms = () => {\r\n    return getKinopoiskApiData('https://kinopoiskapiunofficial.tech/api/v2.2/films/top?type=TOP_AWAIT_FILMS&page=1');\r\n}\r\n\r\nconst getFilmDetails = (id) => {\r\n    return getKinopoiskApiData(`https://kinopoiskapiunofficial.tech/api/v2.2/films/${id}`);\r\n}\r\n\r\nconst getBlockFilmsData = async () => {\r\n    const answer = await getTopFilms();\r\n    const data = await answer.json();\r\n\r\n    data.films.forEach(async film => {\r\n        const filmDescId = `block-films-des-${film.filmId}`;\r\n        blockFilmsWrapper.innerHTML +=`\r\n        <div class=\"block05__movie1\">\r\n            <div class=\"block05__bg\">   \r\n                 <img src=\"${film.posterUrlPreview}\" alt=\"\">\r\n             </div>\r\n             <div class=\"block05__shadow\"></div>\r\n             <div class=\"block05__descr\">\r\n                    <div class=\"block05__text2\">${film.nameRu}</div>\r\n                    <div class=\"block05__text3\" id=\"${filmDescId}\"></div>\r\n             </div>\r\n        </div>\r\n        `;\r\n\r\n        const answer = await getFilmDetails(film.filmId);\r\n        const filmData = await answer.json();\r\n\r\n        const descElement = document.getElementById(filmDescId);\r\n        descElement.innerText = filmData.description\r\n        if (!filmData.description) {\r\n            blockFilmsWrapper.removeChild(descElement.parentNode.parentNode);\r\n            \r\n        }\r\n    });\r\n}\r\n\r\ngetBlockFilmsData();"],"file":"block-films.js"}